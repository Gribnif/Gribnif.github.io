<html><head><title>X10 MouseRemote for Linux</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body bgcolor="#FFFFFF"><h2 align=center>X10 MouseRemote for Linux<br>by Dan Wilga</h2>X10's MouseRemote is a remote control that not only acts as a universal remote for a variety of home theater components, but it can also work as a wireless RF mouse for any PC. Combine this with some way to get the video from the PC to your home theater setup and an Internet connection, and you've got a great Web browser, MP3, CD, and DVD player right in your living room.<p>One of the things that seems to be missing is good software to take advantage of the special buttons on the MouseRemote under Unix. Here is my attempt to solve that problem. It was tested in Linux, but the client at least should work on nearly any flavor of Unix. The server may need some tweaking.<h3 align="center"><!-- #BeginLibraryItem "/Library/ruler.lbi" --><img src="../ruler.gif" width="600" height="5"><!-- #EndLibraryItem --></h3><h3 align="center">Download</h3>The current version is 0.90, released on 10/11/99: <a href="MouseRemote.tar.gz">MouseRemote.tar.gz</a> (42 Kb)<h3 align="center"><!-- #BeginLibraryItem "/Library/ruler.lbi" --><img src="../ruler.gif" width="600" height="5"><!-- #EndLibraryItem --></h3><h3 align="center">The Server</h3>The server is a modified version of a daemon called MultiMouse. Originally, this program was designed to allow more than one mouse to be used at the same time. Then, <a href="mailto:tomtek@tomtek.com">tomtek@tomtek.com</a> modified it to decode MouseRemote packets and write them to a FIFO (pipe) that could be read by a client. Tom also wrote a client in C, but I didn't think it was quite flexible enough, so I rewrote it in Perl and also fixed a little bug in Tom's modified code. <p> To compile the server, start by looking at the Makefile. The default install   locations are <code>/usr/local/bin</code> for the <code>multimoused</code> (daemon),   and <code>/usr/local/sbin</code> for <code>multimouse</code>, which is a script   to simplify running <code>multimoused</code>.<p>If everything is to your liking, type:<blockquote>  <p> <code>make<br>    make install</code></p></blockquote><p> Please note that the two FIFOs this script creates for you will have the permissions   <code>666</code>, meaning any user can read or modify them. You may want to   restrict this after running <code>make install</code>. The first FIFO, <code>/dev/mumse</code>   is the new MultiMouse device. The FIFO <code>/dev/x10.fifo</code> is the MouseRemote   data.<p> Next, you will have to start MultiMouse. You should do this by running the   <code>/usr/local/bin/multimouse</code> command as <code>root</code>. Here are   some suggested commandlines. Modify these depending on your particular device   names:<blockquote>   <p> For a PS/2 mouse:  <blockquote>     <p> <code>/usr/local/bin/multimouse -X10 /dev/psaux &amp;</code><br>      This assumes you are using the <code>psaux</code> device for the PS/2 port,       and your desktop mouse is also plugged into the MouseRemote interface.</p>  </blockquote>  <p> For a serial mouse:  <blockquote>    <p> <code>/usr/local/bin/multimouse -SX10 /dev/ttyS0 &amp;</code><br>      Note the different device name: SX10 (Serial X10?).<br>      This assumes you are using the <code>ttyS0</code> (<code>COM1</code> in       PC-speak) device for the MouseRemote, and your desktop mouse is also plugged       into the MouseRemote interface.</p>  </blockquote></blockquote><P> Once you get things working, you can add this command to one of your system   startup files, like <code>/etc/rc.d/rc.local</code>.<p> Next, you have to change the configurations for all of your programs that   normally use the mouse port to instead use the new MultiMouse device, <code>/dev/mumse</code>.<p> <b>IMPORTANT:</b> You also need to change the mouse protocol type to <b>MouseSystems</b>,   regardless of the actual type your mouse is! It took me a while to figure this   one out :-).<p> For example, let's say your X Window configuration, <code>XF86Config</code>,   looks like this:<p> <pre>  Section &quot;Pointer&quot;     Protocol &quot;Microsoft&quot;     Device   &quot;/dev/psaux&quot;     ...whatever...  EndSection</pre>  You should change this to:<pre>  Section &quot;Pointer&quot;     Protocol &quot;MouseSystems&quot;     Device   &quot;/dev/mumse&quot;     ...whatever...  EndSection</pre><p><p>Once you've done this, and made sure the daemon is running, you should be able to use X just like you always did, with either your regular mouse or the MouseRemote.<h3 align="center"><!-- #BeginLibraryItem "/Library/ruler.lbi" --><img src="../ruler.gif" width="600" height="5"><!-- #EndLibraryItem --></h3><h3 align="center">The Client</h3><p>Now we come to the good part: doing something with all that MouseRemote data   that is in the FIFO. To run my program you will need:</p><table width="100%" border="0" cellpadding="2">  <tr>    <td>Perl 5 or newer</td>    <td><a href="http://www.perl.org">http://www.perl.org</a></td>  </tr>  <tr>    <td>Time::HiRes module</td>    <td><a href="http://cpan.perl.org/modules/by-module/Time/">http://cpan.perl.org/modules/by-module/Time/</a></td>  </tr></table><p> You will probably want to run the client as a particular user, and you don't   want other users to be able to run it. So it might just be easiest to leave   it somewhere in the home directory of that user. Of course, you can always put   it somewhere like <code>/usr/local</code> if you want to.</p><p> The first thing you'll want to do is have a look at the configuration file,   <code>MouseRemote.conf</code>. It has comments about how to configure the commands   that will be run when you hit each key on the remote, depending on which mode   the remote is in.<p>Note that the MouseRemote only sends keystrokes for PC, WEB, CD, DVD, and PHONE modes to the interface. There's no way for this program to act on keystrokes while one of the other devices is selected.<p> Within the <code>.conf</code> file, the keys can be listed in any order, or   left out completely. Each device has its own section of the file, starting with   <code>[DEVICENAME]</code>.<p> If a key's name starts with a period (like &quot;<code>.VolDown</code>&quot;),   then when you press and hold that key on the remote, the script will try to   execute the command as quickly as possible, repeatedly, until you let go of   the key. You'll want to use this for functions like Page Up/Down and Volume   Up/Down.<p>If the name does not start with a period, then the script will wait a while before trying to execute the command again. This prevents things like a command to close the top browser window from quickly closing all of your windows before you let go of the key.<p> The key repeat rate is controlled by the constant <code>$DEBOUNCE_EXPIRE</code>   in the <code>MouseRemote.pl</code> file. The default is <code>0.75</code>, or   3/4 of a second. However, you may find that even with autorepeat turned on,   programs like Netscape react a little slowly. This is due to the fact that we're   using a Perl script to run a program to do something that is more readily controlled   in the user interface (X). On my Cyrix P200, scrolling a Web page in Netscape   is only a tiny bit slower than I'd like it to be, though.<p> I haven't included any CD or DVD commands in the sample file because I don't   have a sound card in my Linux box, so I wouldn't be able to test these things.   For more information on Netscape's &quot;remote&quot; parameter, run: <code>netscape   --help</code>. And if you manage to figure out how to make Netscape immediately   scroll to the top/bottom of the current Web page, let me know :-).<p> Before you run <code>MouseRemote.pl</code>, you may have to change the very   first line of the program to point to the exact location of your Perl executable.   Do a &quot;<code>whereis perl</code>&quot; to find this.<p>Runtime syntax:<pre>  MouseRemote.pl [-c configfile] [-d] [-h] [-p pidfile] [PC|CD|WEB|DVD|PHONE]  -d: Turn on debugging messages  -c: Load an alternate conf file. By default, when the program runs it looks      for the config file MouseRemote.conf in the current directory.  -h: This help message  -p: File where the script's pid is written. The default is MouseRemote.pid.  Device name: The default device to use. This script has no way of knowing      what device is currently selected by the MouseRemote when it starts, so      you may have to press a device button before using a MouseRemote button      for the first time after the script starts. The WEB device is the default      if this parameter is not used.</pre>If you want to use <code>MouseRemote.pl</code> to control Netscape or other X Window programs, you must run it as the same user who is going to be using those programs. For testing, a good way to do this is from a command window opened within the X session. <p> Once you get <code>MouseRemote.pl</code> working the way you want it to, you'll   probably want to add it to the <code>.Xclients</code> file of whatever user   runs X. It's important that you NOT do this for more than one user, though.   A sample command you could add to <code>.Xclients</code> would be:<pre>  cd ~/MouseRemote  exec MouseRemote.pl &amp;</pre><p> To force <code>MouseRemote.pl</code> to reload its config file, send it a   <code>SIGHUP</code> signal. One way to do this is:<pre>  kill -SIGHUP `cat MouseRemote.pid`</pre><p>So, it only follows that you can also terminate the process with:<pre>  kill `cat MouseRemote.pid` </pre><h3 align="center"><!-- #BeginLibraryItem "/Library/ruler.lbi" --><img src="../ruler.gif" width="600" height="5"><!-- #EndLibraryItem --></h3><h3 align="center">About My Setup</h3>I currently run a RedHat Linux machine with X10's Big Picture for video transmission and the MouseRemote feature. My <code>MouseRemote.conf</code> is setup almst identically to the sample included in this package.<p> I find that <a href="http://www.clicktv.com">clicktv.com</a> (the address   is listed for the <b>Guide</b> button) is one of the better sources for TV listings.   No annoying frames, and only one ad banner to deal with. <h3 align="center"><!-- #BeginLibraryItem "/Library/ruler.lbi" --><img src="../ruler.gif" width="600" height="5"><!-- #EndLibraryItem --></h3><h3 align="center">References</h3><table width="100%" border="0" cellpadding="2">  <tr bgcolor="#FFCCCC">     <td><b>MultiMouse</b> </td>    <td>Original Author</td>    <td><a href="mailto:manabe@papilio.tutics.tut.ac.jp">manabe@papilio.tutics.tut.ac.jp</a>     </td>  </tr>  <tr bgcolor="#FFCCCC">     <td>&nbsp;</td>    <td>Modified by</td>    <td><a href="mailto:tomtek@tomtek.com">tomtek@tomtek.com</a><br>      <a href="http://www.44.cyberhost.net/tomtek/HA/home.html">http://www.44.cyberhost.net/tomtek/HA/home.html</a></td>  </tr>  <tr bgcolor="#FFCCCC">     <td><b>X10 USA</b></td>    <td>MouseRemote/Big Picture/etc.</td>    <td><a href="http://www.x10.com">www.x10.com</a></td>  </tr>  <tr bgcolor="#FFCCCC">     <td><b>MouseRemote.pl</b></td>    <td>Dan Wilga</td>    <td><a href="mailto:gribnif@pair.com">gribnif@pair.com</a><br>      <a href="http://www.pair.com/gribnif/ha%20">www.pair.com/gribnif/ha </a></td>  </tr></table></body></html>